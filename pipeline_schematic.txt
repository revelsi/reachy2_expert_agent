Reachy2 Expert Agent Pipeline Schematic
================================

1. Document Collection
   |
   |---> Tutorials (Jupyter Notebooks)
   |     |---> Markdown + Code pairs
   |     |---> Narrative flow preservation
   |     |---> Context-aware chunking
   |
   |---> SDK Examples (Python + Notebooks)
   |     |---> Code extraction
   |     |---> Documentation parsing
   |     |---> Smart segmentation
   |
   |---> API Documentation (HTML)
         |---> Class-level extraction
         |---> Function-level extraction
         |---> Context preservation

2. Document Processing
   |
   |---> Custom Chunking Strategies
   |     |---> Tutorial-specific chunking
   |     |---> SDK-specific chunking
   |     |---> API doc-specific chunking
   |
   |---> Context Enhancement
   |     |---> Metadata enrichment
   |     |---> Cross-reference preservation
   |     |---> Semantic markers
   |
   |---> Document Storage
         |---> JSON serialization
         |---> Metadata attachment
         |---> Quality validation

3. Vector Database
   |
   |---> Collection Organization
   |     |---> Tutorials collection
   |     |---> SDK collection
   |     |---> API classes collection
   |     |---> API functions collection
   |
   |---> Embedding Generation
   |     |---> InstructorXL model
   |     |---> Collection-specific instructions
   |     |---> Context-aware embedding
   |
   |---> Index Management
         |---> ChromaDB storage
         |---> Efficient retrieval
         |---> Update handling

4. Retrieval System
   |
   |---> Query Processing
   |     |---> Query understanding
   |     |---> Collection routing
   |     |---> Semantic enhancement
   |
   |---> Search Execution
   |     |---> Vector similarity search
   |     |---> Multi-collection search
   |     |---> Result aggregation
   |
   |---> Result Processing
         |---> Relevance scoring
         |---> Context assembly
         |---> Response formatting

5. Evaluation System
   |
   |---> Metrics Calculation
   |     |---> Precision@5
   |     |---> Recall@5
   |     |---> MRR
   |     |---> nDCG@5
   |
   |---> Test Suite
   |     |---> Diverse test queries
   |     |---> Ground truth mapping
   |     |---> Performance tracking
   |
   |---> Results Analysis
         |---> Metrics aggregation
         |---> Performance visualization
         |---> Improvement suggestions

Future Enhancements (Planned)
----------------------------
1. Two-Stage Retrieval
   - Initial candidate selection
   - Re-ranking with cross-encoder
   - Score aggregation

2. Query Enhancement
   - Query expansion
   - Semantic enrichment
   - Context injection

3. Model Fine-tuning
   - Domain adaptation
   - Performance optimization
   - Relevance learning 